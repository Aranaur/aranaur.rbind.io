{
  "hash": "db17c39e90bfb25ef466558d41cf4063",
  "result": {
    "markdown": "---\ntitle: \"Baby Names\"\nauthor: \"Ігор Мірошниченко\"\ndescription: \"Джерело: [SSN Office](https://www.ssa.gov/oact/babynames/background.html)\"\ndate: today\ndate-format: iso\nimage: featured.png\nnumber-sections: false\n# execute: \n#   freeze: auto\ncategories:\n  - zip\n  - categorical\n  - continuous\n  - visualization\n  - usa\n---\n\n::: {.column-margin}\n![](featured.png){width=100%}\n:::\n\n## Дані [{{< iconify material-symbols download >}}](https://raw.githubusercontent.com/Aranaur/aranaur.rbind.io/main/datasets/babynames/names.zip)\n\nОпис даних:\n\n> Всі імена взяті із заяв на отримання карток соціального страхування для дітей, які **народилися в США після 1879 року**. Зверніть увагу, що **багато людей, народжених до 1937 року, ніколи не зверталися за карткою соціального страхування**, тому їхні імена не включені в дані.<br><br>Задля конфіденційності, якщо ім'я зустрічається **менше 5 разів за рік** у певному штаті, такі записи **виключені** з вибірки.<br><br>Усі дані взяті зі 100% вибірки записів про заяви на отримання карток соціального страхування станом на **березень 2022 року**.\n\n::: {.cell .column-page-inset-right execution_count=1}\n``` {.python .cell-code}\n'https://raw.githubusercontent.com/Aranaur/aranaur.rbind.io/main/datasets/babynames/names.zip'\n```\n:::\n\n\n::: {.cell execution_count=2}\n\n::: {.cell-output .cell-output-display execution_count=1}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Name</th>\n      <th>Sex</th>\n      <th>Count</th>\n      <th>Year</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>Mary</td>\n      <td>F</td>\n      <td>7065</td>\n      <td>1880</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>Anna</td>\n      <td>F</td>\n      <td>2604</td>\n      <td>1880</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>Emma</td>\n      <td>F</td>\n      <td>2003</td>\n      <td>1880</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>Elizabeth</td>\n      <td>F</td>\n      <td>1939</td>\n      <td>1880</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>Minnie</td>\n      <td>F</td>\n      <td>1746</td>\n      <td>1880</td>\n    </tr>\n    <tr>\n      <th>...</th>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n    </tr>\n    <tr>\n      <th>31910</th>\n      <td>Zuberi</td>\n      <td>M</td>\n      <td>5</td>\n      <td>2022</td>\n    </tr>\n    <tr>\n      <th>31911</th>\n      <td>Zydn</td>\n      <td>M</td>\n      <td>5</td>\n      <td>2022</td>\n    </tr>\n    <tr>\n      <th>31912</th>\n      <td>Zylon</td>\n      <td>M</td>\n      <td>5</td>\n      <td>2022</td>\n    </tr>\n    <tr>\n      <th>31913</th>\n      <td>Zymeer</td>\n      <td>M</td>\n      <td>5</td>\n      <td>2022</td>\n    </tr>\n    <tr>\n      <th>31914</th>\n      <td>Zymeire</td>\n      <td>M</td>\n      <td>5</td>\n      <td>2022</td>\n    </tr>\n  </tbody>\n</table>\n<p>2085158 rows × 4 columns</p>\n</div>\n```\n:::\n:::\n\n\n## Завантаження даних\n\n::: {.panel-tabset}\n## R\n\n``` {.r}\nlibrary(tidyverse)\nlibrary(vroom)\n\n# Завантаження даних безпосередньо з Інтернету\ndata_url <- \"https://raw.githubusercontent.com/Aranaur/aranaur.rbind.io/main/datasets/babynames/names.zip\"\nlocal_filename <- \"babynames.zip\"\nif (!file.exists(local_filename)) { # якщо дані існують, не завантажувати знову\n  download.file(data_url, local_filename, mode = \"wb\")\n}\n\ndata_files <- unzip(local_filename, junkpaths = TRUE, exdir = tempdir())\n\nbabynames <- list()\nfor (i in data_files) {\n  df <- vroom(i, col_names = c(\"Name\", \"Sex\", \"Count\"), show_col_types = FALSE) %>% \n    mutate(Year = str_match(i, \"yob(\\\\d{4})\\\\.txt\")[, 2] %>% \n             as.numeric())\n  babynames <- bind_rows(babynames, df)\n}\n```\n\n## Python\n\n``` {.python}\nimport pandas as pd\nimport urllib.request\nimport os.path\nimport zipfile\n\n# Завантажуємо дані безпосередньо з інтернету\ndata_url = \"https://raw.githubusercontent.com/Aranaur/aranaur.rbind.io/main/datasets/babynames/names.zip\"\nlocal_filename = \"babynames.zip\"\nif not os.path.exists(local_filename): # якщо дані існують, не завантажувати знову\n    with urllib.request.urlopen(data_url) as resp, open(local_filename, 'wb') as f:\n        f.write(resp.read())\n\nbabynames = [] \nwith zipfile.ZipFile(local_filename, \"r\") as zf:\n    data_files = [f for f in zf.filelist if f.filename[-3:] == \"txt\"]\n    def extract_year_from_filename(fn):\n        return int(fn[3:7])\n    for f in data_files:\n        year = extract_year_from_filename(f.filename)\n        with zf.open(f) as fp:\n            df = pd.read_csv(fp, names=[\"Name\", \"Sex\", \"Count\"])\n            df[\"Year\"] = year\n            babynames.append(df)\nbabynames = pd.concat(babynames)\n```\n\n:::\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js\" integrity=\"sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\" integrity=\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\" crossorigin=\"anonymous\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}