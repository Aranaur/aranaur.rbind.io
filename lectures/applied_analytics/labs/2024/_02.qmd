---
title: Завдання №2
subtitle: "Прикладна аналітика"
format:
    html: default
---

У цьому завданні ми порахуємо кілька продуктових метрик і подивимося, які розподіли можуть зустрітися на практиці.

### Опис даних

* `ad_id` --- ідентифікатор оголошення (реклами)
* `xyz_campaign_id` --- ідентифікатор рекламної кампанії в базі компанії X
* `fb_campaign_id` --- ідентифікатор кампанії у Facebook
* `age` --- вікова група, якій показувалася реклама
* `gender` --- стать тих, кому показували рекламу
* `interest` --- код, що вказує категорію, до якої належить інтерес користувача (відповідність число - інтерес)
* `impressions` --- число показів
* `clicks` --- число кліків
* `spent` --- сума, яку компанія витратила на показ оголошення 
* `total_conversion` --- кількість людей, які зацікавилися продуктом після перегляду реклами
* `approved_conversion` --- кількість людей, які купили продукт після перегляду реклами

## Загальний план

1. [Завантажте дані](https://aranaur.rbind.io/datasets/conversion), перевірте кількість спостережень і стовпців, типи даних, наявність пропущених значень, які унікальні значення зустрічаються. Скільки унікальних рекламних кампаній було проведено?
2. Подивіться на дані та їхній опис. Співвіднесіть назви змінних із відповідним типом даних:
    - Дискретні:
    - Номінативні:
    - Неперервні:
    - Рангові/порядкові:
3. Побудуйте графік розподілу числа показів (`Impressions`) для кожної реклами, прологарифмувавши значення. Які твердження є правдивими:
    - Розподіл унімодальний
    - Розподіл бімодальний
    - Отриманий розподіл не є нормальним
    - Розподіл симетричний
    - Отриманий розподіл є нормальним
4. Створіть нову змінну з `CTR` (click-through rate), тобто відношення кількості кліків до кількості показів:
$$ CTR = \frac{clicks}{impressions} $$

    Створіть нову змінну, потім подивіться на описові статистики. Вкажіть `ad_id` оголошення з найбільшим `CTR`.

5. Візуалізуйте `CTR` із розбивкою за номером рекламної кампанії (`xyz_campaign_id`). Якому графіку відповідає розподіл `CTR` кампанії `916`?

![](img/ads.png){fig-align="center"}

6. CPC (cost-per-click) --- вартість за клік користувача по оголошенню. Розраховується шляхом ділення суми витрачених грошей на загальне число кліків:

    $$ CPC = \frac{spent}{clicks} $$

    Виведіть описові статистики для нової змінної, подивіться на форму розподілу. Розрахуйте міжквартильний розмах, округлений до двох знаків після крапки.

::: {.callout-note}
Зверніть увагу, що в стовпці можуть зустрітися `NaN`. Якщо ви використовуєте функцію `iqr` зі `scipy`, то слід вказати аргумент `nan_policy='omit'`, щоб їх проігнорувати. При побудові графіка необхідно використовувати метод `.dropna()`.
:::
7. Візуалізуйте `CPC` з розбивкою за статтю користувачів, яким були показані оголошення. 
8. Конверсія (conversion rate) --- відношення числа користувачів, які вчинили цільову дію на певному етапі, до загальної кількості тих, хто дійшов до цього етапу.

    Порахуйте конверсію з кліка в покупку. Як відповідь вкажіть конверсію для оголошення `1121814` у відсотках, округливши значення до 2 знаків після крапки. Наприклад, якщо значення кліків дорівнює `10`, а покупок - `2`, то `CR` на цьому етапі становить 2/10=0.2=20.

::: {.callout-note}
Кліки --- `Clicks`, Покупки --- `Approved_Conversion`.
:::