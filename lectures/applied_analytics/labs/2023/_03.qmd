---
title: Завдання №4
subtitle: "Прикладна аналітика"
format:
    html: default
    pdf:
        # include-in-header: preamble.tex
        mainfont: Roboto
        monofont: Roboto
        fontfamily: roboto
---

# Читання та запис файлів

## 1. Рядки коду

Один із способів виміряти складність програми - підрахувати кількість [рядків коду](https://en.wikipedia.org/wiki/Source_lines_of_code) (LOC), не враховуючи порожні рядки та коментарі. Наприклад, програма типу:

```{.python}
# Say hello

name = input("What's your name? ")
print(f"hello, {name}")
```

має лише два рядки коду, а не чотири, оскільки перший рядок є коментарем, а другий - порожній (тобто просто пробіли). 

Це не так вже й багато, тож, швидше за все, програма не така вже й складна. Звичайно, те, що одна програма (або навіть функція) має більше рядків коду, ніж інша, не обов'язково означає, що вона складніша. Наприклад, функція на зразок:

```{.python}
def is_even(n):
    if n % 2 == 0:
        return True
    else:
        return False
```

насправді не вдвічі складніша за таку функцію, як

```{.python}
def is_even(n):
    return n % 2 == 0
```

навіть незважаючи на те, що перша має (більш ніж) удвічі більше рядків коду. Насправді, перша може бути простішою, якщо її легше читати! Тож рядки коду слід сприймати з обережністю.

**Завдання:** у файлі `lines.py` реалізуйте програму, яка очікує рівно один аргумент командного рядка, ім'я (або шлях) файлу Python, і виводить кількість рядків коду у цьому файлі, виключаючи коментарі та порожні рядки. Якщо користувач не вказав рівно один аргумент командного рядка, або якщо ім'я вказаного файлу не закінчується на `.py`, або якщо вказаного файлу не існує, програма повинна завершити роботу через `sys.exit`.

Вважайте, що будь-який рядок, який починається з `#`, перед яким необов'язково ставиться пробіл, є коментарем ([docstring](https://peps.python.org/pep-0257/) не слід вважати коментарем). Вважатимемо, що будь-який рядок, який містить лише пробіли, є порожнім.

::: {.callout-note collapse="true"}
## Підказка

- Пам'ятайте, що `str` має досить багато методів, див. [методи рядків](docs.python.org/3/library/stdtypes.html#string-methods), включаючи `lstrip` і `startswith`.
- Зверніть увагу, що `open` може викликати помилку `FileNotFoundError`, див. [посилання](docs.python.org/3/library/exceptions.html#FileNotFoundError).
- Можливо, вам буде корисно протестувати вашу програму.
:::

Демонстрація роботи програми:

![](img/lines_of_code.gif)