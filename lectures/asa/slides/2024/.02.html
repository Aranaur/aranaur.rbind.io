<!DOCTYPE html>
<html lang="en"><head>
<script src=".02_files/libs/clipboard/clipboard.min.js"></script>
<script src=".02_files/libs/quarto-html/tabby.min.js"></script>
<script src=".02_files/libs/quarto-html/popper.min.js"></script>
<script src=".02_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href=".02_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href=".02_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href=".02_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href=".02_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src=".02_files/libs/quarto-contrib/iconify-1.0.7/iconify-icon.min.js"></script><meta charset="utf-8">
  <meta name="generator" content="quarto-1.5.57">

  <meta name="author" content="Ігор Мірошниченко">
  <title>Статистична потужність</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href=".02_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href=".02_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #24292e;  }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #24292e; } /* Normal */
    code span.al { color: #ff5555; font-weight: bold; } /* Alert */
    code span.an { color: #6a737d; } /* Annotation */
    code span.at { color: #d73a49; } /* Attribute */
    code span.bn { color: #005cc5; } /* BaseN */
    code span.bu { color: #d73a49; } /* BuiltIn */
    code span.cf { color: #d73a49; } /* ControlFlow */
    code span.ch { color: #032f62; } /* Char */
    code span.cn { color: #005cc5; } /* Constant */
    code span.co { color: #6a737d; } /* Comment */
    code span.cv { color: #6a737d; } /* CommentVar */
    code span.do { color: #6a737d; } /* Documentation */
    code span.dt { color: #d73a49; } /* DataType */
    code span.dv { color: #005cc5; } /* DecVal */
    code span.er { color: #ff5555; text-decoration: underline; } /* Error */
    code span.ex { color: #d73a49; font-weight: bold; } /* Extension */
    code span.fl { color: #005cc5; } /* Float */
    code span.fu { color: #6f42c1; } /* Function */
    code span.im { color: #032f62; } /* Import */
    code span.in { color: #6a737d; } /* Information */
    code span.kw { color: #d73a49; } /* Keyword */
    code span.op { color: #24292e; } /* Operator */
    code span.ot { color: #6f42c1; } /* Other */
    code span.pp { color: #d73a49; } /* Preprocessor */
    code span.re { color: #6a737d; } /* RegionMarker */
    code span.sc { color: #005cc5; } /* SpecialChar */
    code span.ss { color: #032f62; } /* SpecialString */
    code span.st { color: #032f62; } /* String */
    code span.va { color: #e36209; } /* Variable */
    code span.vs { color: #032f62; } /* VerbatimString */
    code span.wa { color: #ff5555; } /* Warning */
  </style>
  <link rel="stylesheet" href=".02_files/libs/revealjs/dist/theme/quarto.css">
  <link href=".02_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href=".02_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href=".02_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href=".02_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href=".02_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href=".02_files/libs/revealjs/plugin/verticator/verticator.css" rel="stylesheet">
  <link href=".02_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-iframe=".02_files/libs/colored-particles/index.html" class="quarto-title-block center">
  <h1 class="title">Статистична потужність</h1>
  <p class="subtitle">Прикладний статистичний аналіз</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Ігор Мірошниченко 
</div>
        <p class="quarto-title-affiliation">
            КНУ імені Тараса Шевченка, ФІТ
          </p>
    </div>
</div>

</section><section id="TOC">
<nav role="doc-toc"> 
<h2 id="toc-title">Зміст</h2>
<ul>
<li><a href="#/потужність-статистичного-критерію" id="/toc-потужність-статистичного-критерію">Потужність статистичного критерію</a></li>
<li><a href="#/мінімальний-виявлений-ефект-mde" id="/toc-мінімальний-виявлений-ефект-mde">Мінімальний виявлений ефект <em>(MDE)</em></a></li>
<li><a href="#/довірчі-інтервали" id="/toc-довірчі-інтервали">Довірчі інтервали</a></li>
</ul>
</nav>
</section>
<section>
<section id="потужність-статистичного-критерію" class="title-slide slide level1 center" data-background-iframe=".02_files/libs/colored-particles/index.html">
<h1>Потужність статистичного критерію</h1>

</section>
<section id="хибно-негативна-помилка" class="slide level2 smaller">
<h2>Хибно-негативна помилка</h2>
<p>Раніше ми звертали увагу тільки на <span class="math inline">\(\alpha\)</span> — <strong>рівень значущості</strong>.</p>
<p>Цей параметр контролює ймовірність виявлення <strong>помилки I роду</strong> (<em>FPR, хибно-позитивна помилка</em>): відхилення <span class="math inline">\(H_0\)</span>, коли вона насправді вірна.</p>
<p><strong>В термінах бізнесу:</strong> в яку кількість неефективних проєктів ми готові вкладати ресурси?</p>
<div class="fragment">
<center>
<span class="hi">Чи можемо ми мінімізувати цю помилку?</span>
</center>
</div>
<div class="fragment">
<p>Так! Для цього достатньо ніколи не відкидати <span class="math inline">\(H_0\)</span></p>
<p><span class="math display">\[
S \equiv 0, \alpha = 0
\]</span></p>
</div>
<div class="fragment">
<p>Якщо є помилка I роду, то є і <strong>помилка II роду</strong> — <strong>хибно-негативна помилка</strong> (<em>FNR</em>): приймаємо <span class="math inline">\(H_0\)</span>, коли насправді вірною є <span class="math inline">\(H_1\)</span>.</p>
<p><strong>В термінах бізнесу:</strong> яку кількість ефективних проєктів ми готові впустити?</p>
<p><span class="math display">\[
\beta = \text{FNR} = \mathbb{P}(S=0|H_1)
\]</span></p>
</div>
</section>
<section id="критерій-для-пори-року" class="slide level2 tiny">
<h2>Критерій для пори року ❄️☀️</h2>
<p><span class="math display">\[
H_0: \text{на вулиці літо}
\]</span></p>
<p><span class="math display">\[
H_1: \text{на вулиці не літо}
\]</span></p>
<div class="fragment">
<p><span class="math display">\[
\begin{equation}
Q = \begin{cases}
1, &amp; \text{якщо на вулиці йде сніг} \\
0, &amp; \text{інакше}
\end{cases}
\end{equation}
\]</span></p>
</div>
<div class="fragment">
<p><span class="math display">\[
\begin{equation}
S = Q = \begin{cases}
1, &amp; \text{якщо }Q = 1, \text{ відхиляємо } H_0 \\
0, &amp; \text{якщо }Q = 0, \text{ не відхиляємо } H_0
\end{cases}
\end{equation}
\]</span></p>
</div>
<div class="fragment">
<p><span class="math display">\[
\alpha = \text{FPR} = \mathbb{P}(\text{йде сніг}|\text{зараз літо}) &lt; 0.001
\]</span></p>
<p><span class="math display">\[
\beta = \text{FNR} = \mathbb{P}(\text{не йде сніг}|\text{зараз не літо}) &gt; 0.9
\]</span></p>
</div>
<div class="fragment">
<p>Як бачимо, критерій доволі марний.</p>
</div>
<div class="fragment">
<p><span class="hi">Потужність статистичного критерію</span> (<em>power, True Positive Rate, істинно-позитивне значення</em>) — це ймовірність правильно відхилити <span class="math inline">\(H_0\)</span>, коли вона істинно є хибною, тобто здатність виявити ефект, якщо він дійсно існує.</p>
<p><span class="math display">\[
\text{Power} = 1 - \beta = \mathbb{P}(S=1|H_1)
\]</span></p>
</div>
<div class="fragment">
<p>У нашому прикладі: <span class="math inline">\(\text{Power} = 1 - 0.9 = 0.1\)</span></p>
</div>
</section>
<section id="потужність" class="slide level2 tiny">
<h2>Потужність</h2>
<div class="columns">
<div class="column" style="width:65%;">
<p>Згадаємо задачу про доставку:</p>
<p><span class="math inline">\(H_0: \mu = 0.5 \\H_1: \mu &gt; 0.5 \\Q = \text{кількість підтверджених замовлень} \\\alpha = 0.05 \\ S = \{Q \geq 20\}\)</span></p>
</div><div class="column fragment" style="width:35%;">
<div id="cell-power-h0" class="cell" data-execution_count="2">
<div class="cell-output cell-output-display">
<div>
<figure>
<p><img data-src=".02_files/figure-revealjs/power-h0-output-1.svg" id="power-h0"></p>
</figure>
</div>
</div>
</div>
</div></div>
<div class="fragment">
<div class="columns">
<div class="column" style="width:65%;">
<p>Припустимо, що вірна <span class="math inline">\(H_1\)</span>: <span class="math inline">\(\mu = 0.6\)</span></p>
</div><div class="column fragment" style="width:35%;">
<div id="cell-power-h1" class="cell" data-execution_count="3">
<div class="cell-output cell-output-display">
<div>
<figure>
<p><img data-src=".02_files/figure-revealjs/power-h1-output-1.svg" id="power-h1"></p>
</figure>
</div>
</div>
</div>
</div></div>
</div>
<div class="fragment">
<p><span class="math display">\[\text{Power} = \mathbb{P}(Q \geq 20|\mu = 0.6)\]</span></p>
</div>
</section>
<section class="slide level2">

<p><span class="math display">\[\text{Power} = \mathbb{P}(Q \geq 20|\mu = 0.6)\]</span></p>

<img data-src=".02_files/figure-revealjs/power-output-1.svg" id="power" class="quarto-figure quarto-figure-center r-stretch"><div id="power-value" class="cell" data-execution_count="5">
<div class="cell-output cell-output-stdout">
<pre><code>False Positive Rate is 4.9%
Power is 29.1%</code></pre>
</div>
</div>
<p><span class="tiny">Видно, що потужність близько <span class="math inline">\(30\%\)</span>. Це доволі маленьке значення, адже якщо наш продукт прибутковий, то ми побачимо це за допомогою нашого тесту лише з ймовірністю в <span class="math inline">\(30\)</span> відсотків. <strong>Ми легко можемо пропустити ефект.</strong></span></p>
</section>
<section id="python-та-потужність" class="slide level2 smaller">
<h2>Python та потужність</h2>
<div id="power-def" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_stat_power(N, mu_h0, mu_alternative, alpha):</span>
<span id="cb2-2"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="co">'''Обчислює статистичну потужність критерію для біноміального розподілу</span></span>
<span id="cb2-3"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb2-4"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co">    Параметри:</span></span>
<span id="cb2-5"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co">        N - кількість бернуллієвських експериментів (розмір вибірки)</span></span>
<span id="cb2-6"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co">        mu_h0 - імовірність успіху в нульовій гіпотезі</span></span>
<span id="cb2-7"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co">        mu_alternative - передбачувана ймовірність успіху в експерименті</span></span>
<span id="cb2-8"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co">        alpha - рівень значущості критерію</span></span>
<span id="cb2-9"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co">    '''</span></span>
<span id="cb2-10"><a href="" aria-hidden="true" tabindex="-1"></a>    binom_h0 <span class="op">=</span> binom(n<span class="op">=</span>N, p<span class="op">=</span>mu_h0)</span>
<span id="cb2-11"><a href="" aria-hidden="true" tabindex="-1"></a>    binom_alternative <span class="op">=</span> binom(n<span class="op">=</span>N, p<span class="op">=</span>mu_alternative)</span>
<span id="cb2-12"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-13"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="co"># обчислюємо критичне значення</span></span>
<span id="cb2-14"><a href="" aria-hidden="true" tabindex="-1"></a>    critical_value <span class="op">=</span> binom_h0.ppf(<span class="dv">1</span> <span class="op">-</span> alpha) <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb2-15"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="co"># обчислюємо потужність за формулою</span></span>
<span id="cb2-16"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">1</span> <span class="op">-</span> binom_alternative.cdf(critical_value <span class="op">-</span> <span class="dv">1</span>) </span></code><button title="Скопіювати текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br>
</p>
<div id="cell-power-example-30" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="" aria-hidden="true" tabindex="-1"></a>get_stat_power(N<span class="op">=</span><span class="dv">30</span>, mu_h0<span class="op">=</span><span class="fl">0.5</span>,mu_alternative<span class="op">=</span><span class="fl">0.6</span>, alpha<span class="op">=</span><span class="fl">0.05</span>)</span></code><button title="Скопіювати текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="power-example-30" class="cell-output cell-output-display" data-execution_count="7">
<pre><code>0.2914718612234968</code></pre>
</div>
</div>
<p>Подивимося, що буде, якщо ми проведемо експеримент на 300 клієнтах.</p>
<div id="cell-power-example-300" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="" aria-hidden="true" tabindex="-1"></a>get_stat_power(N<span class="op">=</span><span class="dv">300</span>, mu_h0<span class="op">=</span><span class="fl">0.5</span>,mu_alternative<span class="op">=</span><span class="fl">0.6</span>, alpha<span class="op">=</span><span class="fl">0.05</span>)</span></code><button title="Скопіювати текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="power-example-300" class="cell-output cell-output-display" data-execution_count="8">
<pre><code>0.9655326717180749</code></pre>
</div>
</div>
</section>
<section id="python-та-потужність-1" class="slide level2 smaller">
<h2>Python та потужність</h2>
<p>Прийнято вважати, що прийнятною для роботи потужністю вважається <span class="math inline">\(80\%\)</span>.</p>
<p>Подивимося, як змінюється потужність при зростанні розміру вибірки, і скільки потрібно провести експериментів, щоб детектувати ефект при <span class="math inline">\(\mu=0.6\)</span> в <span class="math inline">\(80\%\)</span> випадків.</p>
<div id="cell-power-example-80" class="cell" data-execution_count="9">
<details class="code-fold">
<summary>Код</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="" aria-hidden="true" tabindex="-1"></a>n_grid <span class="op">=</span> numpy.arange(<span class="dv">10</span>, <span class="dv">600</span>, <span class="dv">10</span>)</span>
<span id="cb7-2"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># можемо обчислити </span></span>
<span id="cb7-3"><a href="" aria-hidden="true" tabindex="-1"></a>power <span class="op">=</span> get_stat_power(n_grid, <span class="fl">0.5</span>, <span class="fl">0.6</span>, alpha<span class="op">=</span><span class="fl">0.05</span>)</span>
<span id="cb7-4"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="" aria-hidden="true" tabindex="-1"></a>pyplot.figure(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">7</span>))</span>
<span id="cb7-6"><a href="" aria-hidden="true" tabindex="-1"></a>pyplot.title(<span class="st">'Потужність для $\mu = 0,6$'</span>, fontsize<span class="op">=</span><span class="dv">18</span>)</span>
<span id="cb7-7"><a href="" aria-hidden="true" tabindex="-1"></a>pyplot.xlabel(<span class="st">'Кількість пробних поставок'</span>, fontsize<span class="op">=</span><span class="dv">15</span>)</span>
<span id="cb7-8"><a href="" aria-hidden="true" tabindex="-1"></a>pyplot.ylabel(<span class="st">'Потужність'</span>, fontsize<span class="op">=</span><span class="dv">15</span>)</span>
<span id="cb7-9"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="" aria-hidden="true" tabindex="-1"></a>pyplot.plot(n_grid, power)</span>
<span id="cb7-11"><a href="" aria-hidden="true" tabindex="-1"></a>pyplot.axhline(<span class="fl">0.8</span>, ls<span class="op">=</span><span class="st">'--'</span>, color<span class="op">=</span><span class="st">'red'</span>, label<span class="op">=</span><span class="st">'Power = 80%'</span>)</span>
<span id="cb7-12"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-13"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># рахуємо мінімальний розмір вибірки для потужності у 80% </span></span>
<span id="cb7-14"><a href="" aria-hidden="true" tabindex="-1"></a>min_n <span class="op">=</span> n_grid[power <span class="op">&gt;=</span> <span class="fl">0.8</span>].<span class="bu">min</span>()</span>
<span id="cb7-15"><a href="" aria-hidden="true" tabindex="-1"></a>pyplot.axvline(min_n, ls<span class="op">=</span><span class="st">'--'</span>, color<span class="op">=</span>turquoise, label<span class="op">=</span><span class="ss">f'N = </span><span class="sc">{</span>min_n<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb7-16"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-17"><a href="" aria-hidden="true" tabindex="-1"></a>pyplot.legend(fontsize<span class="op">=</span><span class="dv">15</span>)</span>
<span id="cb7-18"><a href="" aria-hidden="true" tabindex="-1"></a>pyplot.show()</span></code><button title="Скопіювати текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>

</div>
<img data-src=".02_files/figure-revealjs/power-example-80-output-1.svg" id="power-example-80" class="quarto-figure quarto-figure-center r-stretch"></section>
<section id="python-та-потужність-2" class="slide level2 smaller">
<h2>Python та потужність</h2>
<p>А що, якщо ми хочемо детектувати ще менший ефект? Наприклад, якщо хочемо відкидати гіпотезу при <span class="math inline">\(\mu = 0.51\)</span>. Часто поліпшення ймовірності успіху на <span class="math inline">\(1\%\)</span> може бути значущим для продукту, тому це питання не позбавлене сенсу.</p>
<div id="cell-power-example-51" class="cell" data-execution_count="10">
<details class="code-fold">
<summary>Код</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="" aria-hidden="true" tabindex="-1"></a>n_grid <span class="op">=</span> numpy.arange(<span class="dv">10</span>, <span class="dv">30000</span>, <span class="dv">59</span>)</span>
<span id="cb8-2"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="" aria-hidden="true" tabindex="-1"></a>power <span class="op">=</span> get_stat_power(n_grid, <span class="fl">0.5</span>, <span class="fl">0.51</span>, alpha<span class="op">=</span><span class="fl">0.05</span>)</span>
<span id="cb8-4"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="" aria-hidden="true" tabindex="-1"></a>pyplot.figure(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">7</span>))</span>
<span id="cb8-6"><a href="" aria-hidden="true" tabindex="-1"></a>pyplot.title(<span class="st">'Потужність для $\mu = 0.51$'</span>, fontsize<span class="op">=</span><span class="dv">18</span>)</span>
<span id="cb8-7"><a href="" aria-hidden="true" tabindex="-1"></a>pyplot.xlabel(<span class="st">'Кількість пробних поставок'</span>, fontsize<span class="op">=</span><span class="dv">15</span>)</span>
<span id="cb8-8"><a href="" aria-hidden="true" tabindex="-1"></a>pyplot.ylabel(<span class="st">'Потужність'</span>, fontsize<span class="op">=</span><span class="dv">15</span>)</span>
<span id="cb8-9"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-10"><a href="" aria-hidden="true" tabindex="-1"></a>pyplot.plot(n_grid, power)</span>
<span id="cb8-11"><a href="" aria-hidden="true" tabindex="-1"></a>pyplot.axhline(<span class="fl">0.8</span>, ls<span class="op">=</span><span class="st">'--'</span>, color<span class="op">=</span><span class="st">'red'</span>, label<span class="op">=</span><span class="st">'Power = 80%'</span>)</span>
<span id="cb8-12"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-13"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># рахуємо мінімальний розмір вибірки для потужності у 80% </span></span>
<span id="cb8-14"><a href="" aria-hidden="true" tabindex="-1"></a>min_n <span class="op">=</span> n_grid[power <span class="op">&gt;=</span> <span class="fl">0.8</span>].<span class="bu">min</span>()</span>
<span id="cb8-15"><a href="" aria-hidden="true" tabindex="-1"></a>pyplot.axvline(min_n, ls<span class="op">=</span><span class="st">'--'</span>, color<span class="op">=</span>turquoise, label<span class="op">=</span><span class="ss">f'N = </span><span class="sc">{</span>min_n<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb8-16"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-17"><a href="" aria-hidden="true" tabindex="-1"></a>pyplot.legend(fontsize<span class="op">=</span><span class="dv">15</span>)</span>
<span id="cb8-18"><a href="" aria-hidden="true" tabindex="-1"></a>pyplot.show()</span></code><button title="Скопіювати текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>

</div>
<img data-src=".02_files/figure-revealjs/power-example-51-output-1.svg" id="power-example-51" class="quarto-figure quarto-figure-center r-stretch"></section>
<section class="slide level2">

<p>Перед кожним експериментом аналітику варто замислюватися над питанням <span class="hi">тривалості тесту</span> та <span class="hi-slate">кількості учасників</span>.</p>
<p><br>
</p>
<p>Для цього потрібно зрозуміти:</p>
<ul>
<li>Який ефект є для завдання практично значущим?</li>
<li>Скільки знадобиться випробовуваних, щоб детектувати цей ефект частіше, ніж у <span class="math inline">\(80\%\)</span> випадків?</li>
</ul>
</section>
<section id="python-та-потужність-3" class="slide level2 smaller">
<h2>Python та потужність</h2>
<p>З графіків видно, що для детектування меншого ефекту потрібен більший розмір вибірки.</p>
<p>Подивимося, як для фіксованого <span class="math inline">\(N = 30\)</span> змінюється потужність для різних параметрів <span class="math inline">\(\mu\)</span>.</p>
<div id="cell-power-example-mu" class="cell" data-execution_count="11">
<details class="code-fold">
<summary>Код</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="" aria-hidden="true" tabindex="-1"></a>mu_grid <span class="op">=</span> numpy.linspace(<span class="fl">0.5</span>, <span class="dv">1</span>, <span class="dv">500</span>)</span>
<span id="cb9-2"><a href="" aria-hidden="true" tabindex="-1"></a>power <span class="op">=</span> get_stat_power(<span class="dv">30</span>, <span class="fl">0.5</span>, mu_grid, alpha<span class="op">=</span><span class="fl">0.05</span>)</span>
<span id="cb9-3"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="" aria-hidden="true" tabindex="-1"></a>pyplot.figure(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">7</span>))</span>
<span id="cb9-5"><a href="" aria-hidden="true" tabindex="-1"></a>pyplot.title(<span class="st">'Power for $N = 30$'</span>, fontsize<span class="op">=</span><span class="dv">18</span>)</span>
<span id="cb9-6"><a href="" aria-hidden="true" tabindex="-1"></a>pyplot.xlabel(<span class="st">'$\mu$'</span>, fontsize<span class="op">=</span><span class="dv">15</span>)</span>
<span id="cb9-7"><a href="" aria-hidden="true" tabindex="-1"></a>pyplot.ylabel(<span class="st">'Потужність'</span>, fontsize<span class="op">=</span><span class="dv">15</span>)</span>
<span id="cb9-8"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-9"><a href="" aria-hidden="true" tabindex="-1"></a>pyplot.plot(mu_grid, power)</span>
<span id="cb9-10"><a href="" aria-hidden="true" tabindex="-1"></a>pyplot.axhline(<span class="fl">0.8</span>, ls<span class="op">=</span><span class="st">'--'</span>, color<span class="op">=</span><span class="st">'red'</span>, label<span class="op">=</span><span class="st">'Power = 80%'</span>)</span>
<span id="cb9-11"><a href="" aria-hidden="true" tabindex="-1"></a>min_mu <span class="op">=</span> mu_grid[power <span class="op">&gt;=</span> <span class="fl">0.8</span>].<span class="bu">min</span>()</span>
<span id="cb9-12"><a href="" aria-hidden="true" tabindex="-1"></a>pyplot.axvline(min_mu, ls<span class="op">=</span><span class="st">'--'</span>, color<span class="op">=</span>turquoise, label<span class="op">=</span><span class="st">'$\mu$ = </span><span class="sc">{:.2f}</span><span class="st">'</span>.<span class="bu">format</span>(min_mu))</span>
<span id="cb9-13"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-14"><a href="" aria-hidden="true" tabindex="-1"></a>pyplot.legend(fontsize<span class="op">=</span><span class="dv">15</span>)</span>
<span id="cb9-15"><a href="" aria-hidden="true" tabindex="-1"></a>pyplot.show()</span></code><button title="Скопіювати текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>

</div>
<img data-src=".02_files/figure-revealjs/power-example-mu-output-1.svg" id="power-example-mu" class="quarto-figure quarto-figure-center r-stretch"><p>У нашому експерименті ми добре детектуємо ефект, тільки якщо ймовірність успіху в генеральній сукупності хоча б <span class="math inline">\(72\%\)</span>.</p>
</section></section>
<section>
<section id="мінімальний-виявлений-ефект-mde" class="title-slide slide level1 center" data-background-iframe=".02_files/libs/colored-particles/index.html">
<h1>Мінімальний виявлений ефект <em>(MDE)</em></h1>

</section>
<section id="мінімальний-виявлений-ефект" class="slide level2 smaller">
<h2>Мінімальний виявлений ефект</h2>
<p><span class="hi">Мінімальний виявлений ефект</span> (<em>MDE, Minimal Detectable Effect</em>) — це найменший ефект, який ми можемо виявити за допомогою експерименту (як правило, при <span class="math inline">\(80\%\)</span> потужності).</p>

<img data-src=".02_files/figure-revealjs/power-example-mu-2-output-1.svg" id="power-example-mu-2" class="quarto-figure quarto-figure-center r-stretch"><p>У нашому прикладі <span class="math inline">\(\text{MDE} = +0.22\)</span></p>
<p><br>
</p>
<div class="callout callout-warning no-icon callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<p><strong>Більш формально</strong></p>
</div>
<div class="callout-content">
<p><span class="math inline">\(\text{MDE}\)</span> для гіпотези <span class="math inline">\(\mathsf{H}_0: \mu = \mu_0\)</span> — це мінімальний ефект <span class="math inline">\(\delta\)</span>, за якого критерій рівня значущості <span class="math inline">\(\alpha\)</span> для перевірки цієї гіпотези за істинного параметра <span class="math inline">\(\mu = \mu_0 + \delta\)</span> та розміру вибірки <span class="math inline">\(N\)</span> відкидатиме <span class="math inline">\(\mathsf{H}_0\)</span> з потужністю більшою, ніж <span class="math inline">\(1 - \beta\)</span>.</p>
</div>
</div>
</div>
</section>
<section id="python-та-mde" class="slide level2 smaller">
<h2>Python та MDE</h2>
<div id="mde-def" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> binom_test_mde_one_sided(N, mu0, alpha<span class="op">=</span><span class="fl">0.05</span>, min_power<span class="op">=</span><span class="fl">0.8</span>):</span>
<span id="cb10-2"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="co">'''Обчислює MDE одностороннього критерію для перевірки гіпотези mu = mu0 у задачі з доставкою</span></span>
<span id="cb10-3"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb10-4"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co">    Параметри:</span></span>
<span id="cb10-5"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co">        N (int) - розмір вибірки</span></span>
<span id="cb10-6"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co">        mu0 (float) - імовірність успіху в нульовій гіпотезі</span></span>
<span id="cb10-7"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co">        alpha (float) - рівень значущості критерію</span></span>
<span id="cb10-8"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co">        min_power (float) - бажана потужність</span></span>
<span id="cb10-9"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co">        </span></span>
<span id="cb10-10"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co">    Повертає:</span></span>
<span id="cb10-11"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co">        float - MDE'''</span></span>
<span id="cb10-12"><a href="" aria-hidden="true" tabindex="-1"></a>    delta_grid <span class="op">=</span> numpy.linspace(<span class="dv">0</span>, <span class="dv">1</span> <span class="op">-</span> mu0, <span class="dv">500</span>) </span>
<span id="cb10-13"><a href="" aria-hidden="true" tabindex="-1"></a>    power <span class="op">=</span> get_stat_power(N, mu0, mu0 <span class="op">+</span> delta_grid, alpha<span class="op">=</span>alpha)</span>
<span id="cb10-14"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="co"># виберемо відповідні delta і повернемо першу</span></span>
<span id="cb10-15"><a href="" aria-hidden="true" tabindex="-1"></a>    fit_delta <span class="op">=</span> delta_grid[power <span class="op">&gt;=</span> min_power]</span>
<span id="cb10-16"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> fit_delta[<span class="dv">0</span>]</span></code><button title="Скопіювати текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br>
</p>
<div id="cell-mde-def-calc" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="" aria-hidden="true" tabindex="-1"></a>binom_test_mde_one_sided(N<span class="op">=</span><span class="dv">30</span>, mu0<span class="op">=</span><span class="fl">0.5</span>, alpha<span class="op">=</span><span class="fl">0.05</span>, min_power<span class="op">=</span><span class="fl">0.8</span>)</span></code><button title="Скопіювати текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="mde-def-calc" class="cell-output cell-output-display" data-execution_count="14">
<pre><code>0.21843687374749496</code></pre>
</div>
</div>
</section>
<section class="slide level2">

<div class="smaller">
<p>Зазвичай <span class="math inline">\(\text{MDE}\)</span> рахують не просто так, а нерозривно з ним іде питання про визначення розміру вибірки.</p>
<p><br>
</p>
<p><strong>Визначення розміру вибірки</strong></p>
<p><br>
</p>
<p>У нашому завданні ми знайшли <span class="math inline">\(30\)</span> клієнтів, не обчислюючи спочатку, скільки їх знадобиться. Але що якщо отриманий <span class="math inline">\(\text{MDE}\)</span> занадто великий і потрібно зробити його меншим, оскільки очікувані зміни набагато менші? Тоді вирішується зворотне завдання: за необхідним <span class="math inline">\(\text{MDE}\)</span> визначити обсяг вибірки. Якщо ми говоримо, що хочемо детектувати <span class="math inline">\(+10\)</span> в.п., тобто <span class="math inline">\(60\%\)</span> успішних доставок, то потрібно знайти 160 пробних клієнтів, це видно з попередніх графіків. Якщо 30 осіб нам, наприклад, шукати місяць, такий тест може затягнутися майже на півроку. Тому варто подумати про те, щоб виділити додаткові ресурси на пошук клієнтів, наприклад, залучити маркетологів.</p>
</div>
</section></section>
<section>
<section id="довірчі-інтервали" class="title-slide slide level1 center" data-background-iframe=".02_files/libs/colored-particles/index.html">
<h1>Довірчі інтервали</h1>

</section>
<section id="довірчий-інтервал" class="slide level2">
<h2>Довірчий інтервал</h2>
<p><span class="hi">Довірчий інтервал</span> (<em>CI, confidence interval</em>) — множина значень параметра <span class="math inline">\(\mu_0,\)</span> для яких гіпотеза <span class="math inline">\(\mu = \mu_0\)</span> не відкидається критерієм рівня значущості <span class="math inline">\(\alpha\)</span> з відомою ймовірністю <span class="math inline">\(\geq 1 - \alpha\)</span>.</p>
<p>З визначення випливає, що різні критерії можуть породжувати різні довірчі інтервали. У цій частині розглянемо, які інтервали породжуються двостороннім критерієм.</p>
<p>Для цього з кроком <span class="math inline">\(0.001\)</span> переберемо значення <span class="math inline">\(\mu \in [0, 1]\)</span> і перевіримо гіпотези.</p>
</section>
<section id="python-та-довірчий-інтервал" class="slide level2 tiny">
<h2>Python та довірчий інтервал</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div id="ci-def" class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co"># Функція з минулої лекції</span></span>
<span id="cb13-2"><a href="" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> two_sided_criterion_nonsym(n, mu, alpha):</span>
<span id="cb13-3"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="co">'''Будує двосторонній критерій для несиметричної задачі з доставкою</span></span>
<span id="cb13-4"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb13-5"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co">    Параметри:</span></span>
<span id="cb13-6"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co">        n: кількість доставок в експерименті</span></span>
<span id="cb13-7"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co">        mu: імовірність успіху в нульовій гіпотезі</span></span>
<span id="cb13-8"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co">        alpha: рівень значущості критерію</span></span>
<span id="cb13-9"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co">        </span></span>
<span id="cb13-10"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co">    Повертає:</span></span>
<span id="cb13-11"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co">        C1, C2 для критерію S = {Q &lt;= C1 або Q &gt;= C2}</span></span>
<span id="cb13-12"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co">    '''</span></span>
<span id="cb13-13"><a href="" aria-hidden="true" tabindex="-1"></a>    binom_h0 <span class="op">=</span> binom(n<span class="op">=</span>n, p<span class="op">=</span>mu)</span>
<span id="cb13-14"><a href="" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb13-15"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="co"># аналогічно односторонньому критерію</span></span>
<span id="cb13-16"><a href="" aria-hidden="true" tabindex="-1"></a>    c2 <span class="op">=</span> binom_h0.ppf(<span class="dv">1</span> <span class="op">-</span> alpha<span class="op">/</span><span class="dv">2</span>) <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb13-17"><a href="" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb13-18"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="co"># за викладками вище</span></span>
<span id="cb13-19"><a href="" aria-hidden="true" tabindex="-1"></a>    c1 <span class="op">=</span> binom_h0.ppf(alpha<span class="op">/</span><span class="dv">2</span>) <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb13-20"><a href="" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb13-21"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> c1, c2</span></code><button title="Скопіювати текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column fragment" style="width:50%;">
<div id="ci-calc-19" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="" aria-hidden="true" tabindex="-1"></a>success_cnt <span class="op">=</span> <span class="dv">19</span></span>
<span id="cb14-2"><a href="" aria-hidden="true" tabindex="-1"></a>mu_grid <span class="op">=</span> numpy.arange(<span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.001</span>)</span>
<span id="cb14-3"><a href="" aria-hidden="true" tabindex="-1"></a>mu_no_rejection <span class="op">=</span> []</span>
<span id="cb14-4"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> mu_h0 <span class="kw">in</span> mu_grid:</span>
<span id="cb14-6"><a href="" aria-hidden="true" tabindex="-1"></a>    c1, c2 <span class="op">=</span> two_sided_criterion_nonsym(<span class="dv">30</span>, mu_h0, alpha<span class="op">=</span><span class="fl">0.05</span>)</span>
<span id="cb14-7"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> success_cnt <span class="op">&gt;</span> c1 <span class="kw">and</span> success_cnt <span class="op">&lt;</span> c2:</span>
<span id="cb14-8"><a href="" aria-hidden="true" tabindex="-1"></a>        mu_no_rejection.append(mu_h0)</span>
<span id="cb14-9"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-10"><a href="" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'95% confidence interval: </span><span class="sc">{</span><span class="bu">min</span>(mu_no_rejection)<span class="sc">}</span><span class="ss"> -- </span><span class="sc">{</span><span class="bu">max</span>(mu_no_rejection)<span class="sc">}</span><span class="ss">'</span>)</span></code><button title="Скопіювати текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>95% confidence interval: 0.439 -- 0.8</code></pre>
</div>
</div>
<p>Не відхиляємо <span class="math inline">\(H_0\)</span>!</p>
<p><br>
</p>
<div id="ci-calc-28" class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="" aria-hidden="true" tabindex="-1"></a>success_cnt <span class="op">=</span> <span class="dv">28</span></span>
<span id="cb16-2"><a href="" aria-hidden="true" tabindex="-1"></a>mu_grid <span class="op">=</span> numpy.arange(<span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.001</span>)</span>
<span id="cb16-3"><a href="" aria-hidden="true" tabindex="-1"></a>mu_no_rejection <span class="op">=</span> []</span>
<span id="cb16-4"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-5"><a href="" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> mu_h0 <span class="kw">in</span> mu_grid:</span>
<span id="cb16-6"><a href="" aria-hidden="true" tabindex="-1"></a>    c1, c2 <span class="op">=</span> two_sided_criterion_nonsym(<span class="dv">30</span>, mu_h0, alpha<span class="op">=</span><span class="fl">0.05</span>)</span>
<span id="cb16-7"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> success_cnt <span class="op">&gt;</span> c1 <span class="kw">and</span> success_cnt <span class="op">&lt;</span> c2:</span>
<span id="cb16-8"><a href="" aria-hidden="true" tabindex="-1"></a>        mu_no_rejection.append(mu_h0)</span>
<span id="cb16-9"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-10"><a href="" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'95% confidence interval: </span><span class="sc">{</span><span class="bu">min</span>(mu_no_rejection)<span class="sc">}</span><span class="ss"> -- </span><span class="sc">{</span><span class="bu">max</span>(mu_no_rejection)<span class="sc">}</span><span class="ss">'</span>)</span></code><button title="Скопіювати текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>95% confidence interval: 0.78 -- 0.991</code></pre>
</div>
</div>
<p>Відхиляємо <span class="math inline">\(H_0\)</span>!</p>
</div></div>
</section>
<section class="slide level2">

<div id="cell-ci-fig-6" class="cell" data-execution_count="18">
<details class="code-fold">
<summary>Код</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="" aria-hidden="true" tabindex="-1"></a>mus_h0 <span class="op">=</span> [<span class="fl">0.2</span>, <span class="fl">0.438</span>, <span class="fl">0.439</span>, <span class="fl">0.8</span>, <span class="fl">0.81</span>, <span class="fl">0.9</span>]</span>
<span id="cb18-2"><a href="" aria-hidden="true" tabindex="-1"></a>success_cnt <span class="op">=</span> <span class="dv">19</span></span>
<span id="cb18-3"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> pyplot.subplots(<span class="dv">3</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">15</span>, <span class="dv">15</span>))</span>
<span id="cb18-5"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-6"><a href="" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> mu_h0, ax <span class="kw">in</span> <span class="bu">zip</span>(mus_h0, axes.flatten()):</span>
<span id="cb18-7"><a href="" aria-hidden="true" tabindex="-1"></a>    binom_h0 <span class="op">=</span> binom(n<span class="op">=</span><span class="dv">30</span>, p<span class="op">=</span>mu_h0)</span>
<span id="cb18-8"><a href="" aria-hidden="true" tabindex="-1"></a>    probs <span class="op">=</span> binom_h0.pmf(x_grid)</span>
<span id="cb18-9"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-10"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="co"># будуємо вертикальні стовпці від 0 до ймовірності</span></span>
<span id="cb18-11"><a href="" aria-hidden="true" tabindex="-1"></a>    ax.vlines(x_grid, <span class="dv">0</span>, probs, linewidth<span class="op">=</span><span class="fl">8.0</span>, color<span class="op">=</span>turquoise, label<span class="op">=</span><span class="ss">f'PMF, $Binom(</span><span class="sc">{</span>mu_h0<span class="sc">}</span><span class="ss">, 30)$'</span>)</span>
<span id="cb18-12"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="co"># окремо зобразимо критичну область критерію</span></span>
<span id="cb18-13"><a href="" aria-hidden="true" tabindex="-1"></a>    c1, c2 <span class="op">=</span> two_sided_criterion_nonsym(<span class="dv">30</span>, mu_h0, alpha<span class="op">=</span><span class="fl">0.05</span>)</span>
<span id="cb18-14"><a href="" aria-hidden="true" tabindex="-1"></a>    crit_reg <span class="op">=</span> (x_grid <span class="op">&lt;=</span> c1) <span class="op">|</span> (x_grid <span class="op">&gt;=</span> c2)</span>
<span id="cb18-15"><a href="" aria-hidden="true" tabindex="-1"></a>    ax.vlines(x_grid[crit_reg], <span class="dv">0</span>, probs[crit_reg], linewidth<span class="op">=</span><span class="fl">8.0</span>, label<span class="op">=</span><span class="st">'Критична область для S'</span>)</span>
<span id="cb18-16"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-17"><a href="" aria-hidden="true" tabindex="-1"></a>    is_rejection <span class="op">=</span> success_cnt <span class="op">&lt;=</span> c1 <span class="kw">or</span> success_cnt <span class="op">&gt;=</span> c2</span>
<span id="cb18-18"><a href="" aria-hidden="true" tabindex="-1"></a>    ax.axvline(success_cnt, ls<span class="op">=</span><span class="st">'--'</span>, label<span class="op">=</span><span class="ss">f'Q = </span><span class="sc">{</span>success_cnt<span class="sc">}</span><span class="ss">'</span> <span class="op">+</span> (<span class="st">' відкинуто'</span> <span class="cf">if</span> is_rejection <span class="cf">else</span> <span class="st">' не відкинуто'</span>), color<span class="op">=</span><span class="st">'gray'</span>, alpha<span class="op">=</span><span class="fl">0.4</span>)</span>
<span id="cb18-19"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-20"><a href="" aria-hidden="true" tabindex="-1"></a>    rejection_prob <span class="op">=</span> probs[crit_reg].<span class="bu">sum</span>()</span>
<span id="cb18-21"><a href="" aria-hidden="true" tabindex="-1"></a>    ax.set_title(<span class="ss">f'$\mu = </span><span class="sc">{</span>mu_h0<span class="sc">}</span><span class="ss">$'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb18-22"><a href="" aria-hidden="true" tabindex="-1"></a>    ax.legend()</span></code><button title="Скопіювати текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>

</div>
<img data-src=".02_files/figure-revealjs/ci-fig-6-output-1.svg" id="ci-fig-6" class="quarto-figure quarto-figure-center r-stretch"></section>
<section id="односторонні-довірчі-інтервали" class="slide level2">
<h2>Односторонні довірчі інтервали</h2>
<p>У минулій частині ми використовували <strong>двосторонній критерій</strong>, і з нього вийшов довірчий інтервал.</p>
<p>Але на минулій лекції ми говорили, що двосторонній критерій потрібен <strong>вкрай рідко</strong>.</p>
<p>Контролювати помилку <em>False Positive</em> нам потрібно тільки для відхилень у бік, корисний для бізнесу.</p>
<p>У випадку завдання з доставкою це отримання <em>більшої</em> конверсії в успіх.</p>
<p><br>
</p>
<p>Спробуємо скористатися одностороннім критерієм для побудови довірчого інтервалу.</p>
</section>
<section id="python-та-односторонній-інтервал" class="slide level2 smaller">
<h2>Python та односторонній інтервал</h2>
<div class="columns">
<div class="column" style="width:40%;">
<div id="ci-one-sided-сrit" class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> make_binom_criterion(n, mu<span class="op">=</span><span class="fl">0.5</span>, alpha<span class="op">=</span><span class="fl">0.05</span>):</span>
<span id="cb19-2"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="co">'''Будує критерій для задачі з доставкою</span></span>
<span id="cb19-3"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb19-4"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co">    Параметри:</span></span>
<span id="cb19-5"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co">        n: кількість доставок в експерименті</span></span>
<span id="cb19-6"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co">        mu: ймовірність успіху в нульовій гіпотезі</span></span>
<span id="cb19-7"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co">        alpha: рівень значущості критерію</span></span>
<span id="cb19-8"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co">        </span></span>
<span id="cb19-9"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co">    Повертає:</span></span>
<span id="cb19-10"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co">        C для критерію S = {Q &gt;= C}</span></span>
<span id="cb19-11"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co">    '''</span></span>
<span id="cb19-12"><a href="" aria-hidden="true" tabindex="-1"></a>    binom_h0 <span class="op">=</span> binom(n<span class="op">=</span>n, p<span class="op">=</span>mu)</span>
<span id="cb19-13"><a href="" aria-hidden="true" tabindex="-1"></a>    q <span class="op">=</span> binom_h0.ppf(<span class="dv">1</span> <span class="op">-</span> alpha)</span>
<span id="cb19-14"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> q <span class="op">+</span> <span class="dv">1</span></span></code><button title="Скопіювати текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:60%;">
<div id="ci-one-sided-calc" class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="" aria-hidden="true" tabindex="-1"></a>success_cnt <span class="op">=</span> <span class="dv">19</span></span>
<span id="cb20-2"><a href="" aria-hidden="true" tabindex="-1"></a>mu_grid <span class="op">=</span> numpy.arange(<span class="dv">0</span>, <span class="fl">1.001</span>, <span class="fl">0.001</span>)</span>
<span id="cb20-3"><a href="" aria-hidden="true" tabindex="-1"></a>mu_no_rejection <span class="op">=</span> []</span>
<span id="cb20-4"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-5"><a href="" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> mu_h0 <span class="kw">in</span> mu_grid:</span>
<span id="cb20-6"><a href="" aria-hidden="true" tabindex="-1"></a>    crit_val <span class="op">=</span> make_binom_criterion(n<span class="op">=</span><span class="dv">30</span>, mu<span class="op">=</span>mu_h0, alpha<span class="op">=</span><span class="fl">0.05</span>)</span>
<span id="cb20-7"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> success_cnt <span class="op">&lt;</span> crit_val:</span>
<span id="cb20-8"><a href="" aria-hidden="true" tabindex="-1"></a>        mu_no_rejection.append(mu_h0)</span>
<span id="cb20-9"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-10"><a href="" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'95% confidence interval: </span><span class="sc">{</span><span class="bu">min</span>(mu_no_rejection)<span class="sc">}</span><span class="ss"> -- </span><span class="sc">{</span><span class="bu">max</span>(mu_no_rejection)<span class="sc">}</span><span class="ss">'</span>)</span></code><button title="Скопіювати текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>95% confidence interval: 0.467 -- 1.0</code></pre>
</div>
</div>
</div></div>
<p>Коли ми використовували двосторонній інтервал, ми отримали ліву межу <span class="math inline">\(0.439 &lt; 0.467\)</span>.</p>
<p>Виходить, що односторонній інтервал з точки зору лівої межі дає нам більше інформації. При цьому з точки зору правої межі ми втрачаємо інформацію зовсім. Вона дорівнює 1 просто тому, що ймовірність не може бути більшою.</p>
<p>Насправді зазвичай на праву межу не дивляться під час аналізу, коли ми шукаємо позитивний ефект.</p>
</section>
<section id="python-та-односторонній-інтервал-1" class="slide level2 smaller">
<h2>Python та односторонній інтервал</h2>
<p>Припустимо, ми отримали не <span class="math inline">\(19\)</span> успіхів, а <span class="math inline">\(22\)</span>. Побудуємо 2 види інтервалів.</p>
<div id="ci-one-sided-calc-22" class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="" aria-hidden="true" tabindex="-1"></a>success_cnt <span class="op">=</span> <span class="dv">22</span></span>
<span id="cb22-2"><a href="" aria-hidden="true" tabindex="-1"></a>mu_grid <span class="op">=</span> numpy.arange(<span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.001</span>)</span>
<span id="cb22-3"><a href="" aria-hidden="true" tabindex="-1"></a>mu_no_rejection <span class="op">=</span> []</span>
<span id="cb22-4"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-5"><a href="" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> mu_h0 <span class="kw">in</span> mu_grid:</span>
<span id="cb22-6"><a href="" aria-hidden="true" tabindex="-1"></a>    c1, c2 <span class="op">=</span> two_sided_criterion_nonsym(<span class="dv">30</span>, mu_h0, alpha<span class="op">=</span><span class="fl">0.05</span>)</span>
<span id="cb22-7"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> success_cnt <span class="op">&gt;</span> c1 <span class="kw">and</span> success_cnt <span class="op">&lt;</span> c2:</span>
<span id="cb22-8"><a href="" aria-hidden="true" tabindex="-1"></a>        mu_no_rejection.append(mu_h0)</span>
<span id="cb22-9"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-10"><a href="" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Two-sided 95% confidence interval: </span><span class="sc">{</span><span class="bu">min</span>(mu_no_rejection)<span class="sc">}</span><span class="ss"> -- </span><span class="sc">{</span><span class="bu">max</span>(mu_no_rejection)<span class="sc">}</span><span class="ss">'</span>)</span></code><button title="Скопіювати текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Two-sided 95% confidence interval: 0.542 -- 0.877</code></pre>
</div>
</div>
<p><br>
</p>
<div id="ci-one-sided-calc-22-one-sided" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="" aria-hidden="true" tabindex="-1"></a>success_cnt <span class="op">=</span> <span class="dv">22</span></span>
<span id="cb24-2"><a href="" aria-hidden="true" tabindex="-1"></a>mu_grid <span class="op">=</span> numpy.arange(<span class="dv">0</span>, <span class="fl">1.001</span>, <span class="fl">0.001</span>)</span>
<span id="cb24-3"><a href="" aria-hidden="true" tabindex="-1"></a>mu_no_rejection <span class="op">=</span> []</span>
<span id="cb24-4"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-5"><a href="" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> mu_h0 <span class="kw">in</span> mu_grid:</span>
<span id="cb24-6"><a href="" aria-hidden="true" tabindex="-1"></a>    crit_val <span class="op">=</span> make_binom_criterion(n<span class="op">=</span><span class="dv">30</span>, mu<span class="op">=</span>mu_h0, alpha<span class="op">=</span><span class="fl">0.05</span>)</span>
<span id="cb24-7"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> success_cnt <span class="op">&lt;</span> crit_val:</span>
<span id="cb24-8"><a href="" aria-hidden="true" tabindex="-1"></a>        mu_no_rejection.append(mu_h0)</span>
<span id="cb24-9"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-10"><a href="" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'One-sided 95% confidence interval: </span><span class="sc">{</span><span class="bu">min</span>(mu_no_rejection)<span class="sc">:.2f}</span><span class="ss"> -- </span><span class="sc">{</span><span class="bu">max</span>(mu_no_rejection)<span class="sc">}</span><span class="ss">'</span>)</span></code><button title="Скопіювати текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>One-sided 95% confidence interval: 0.57 -- 1.0</code></pre>
</div>
</div>
</section>
<section id="python-та-односторонній-інтервал-2" class="slide level2 smaller">
<h2>Python та односторонній інтервал</h2>
<p>Навіщо ж ми тоді взагалі використовуємо двосторонній інтервал? Щоб це зрозуміти, подивимося, який вигляд мають візуально межі для одностороннього інтервалу.</p>
<div id="cell-ci-fig-6-one-sided" class="cell" data-execution_count="23">
<details class="code-fold">
<summary>Код</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> pyplot.subplots(<span class="dv">3</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">15</span>, <span class="dv">15</span>))</span>
<span id="cb26-2"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> mu_h0, ax <span class="kw">in</span> <span class="bu">zip</span>(mus_h0, axes.flatten()):</span>
<span id="cb26-4"><a href="" aria-hidden="true" tabindex="-1"></a>    binom_h0 <span class="op">=</span> binom(n<span class="op">=</span><span class="dv">30</span>, p<span class="op">=</span>mu_h0)</span>
<span id="cb26-5"><a href="" aria-hidden="true" tabindex="-1"></a>    probs <span class="op">=</span> binom_h0.pmf(x_grid)</span>
<span id="cb26-6"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-7"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="co"># будуємо вертикальні стовпці від 0 до ймовірності</span></span>
<span id="cb26-8"><a href="" aria-hidden="true" tabindex="-1"></a>    ax.vlines(x_grid, <span class="dv">0</span>, probs, linewidth<span class="op">=</span><span class="fl">8.0</span>, color<span class="op">=</span>turquoise, label<span class="op">=</span><span class="ss">f'PMF, $Binom(</span><span class="sc">{</span>mu_h0<span class="sc">}</span><span class="ss">, 30)$'</span>)</span>
<span id="cb26-9"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="co"># окремо зобразимо критичну область критерію</span></span>
<span id="cb26-10"><a href="" aria-hidden="true" tabindex="-1"></a>    c <span class="op">=</span> make_binom_criterion(<span class="dv">30</span>, mu_h0, alpha<span class="op">=</span><span class="fl">0.05</span>)</span>
<span id="cb26-11"><a href="" aria-hidden="true" tabindex="-1"></a>    crit_reg <span class="op">=</span> (x_grid <span class="op">&gt;=</span> c)</span>
<span id="cb26-12"><a href="" aria-hidden="true" tabindex="-1"></a>    ax.vlines(x_grid[crit_reg], <span class="dv">0</span>, probs[crit_reg], linewidth<span class="op">=</span><span class="fl">8.0</span>, label<span class="op">=</span><span class="st">'Критична область для S'</span>)</span>
<span id="cb26-13"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-14"><a href="" aria-hidden="true" tabindex="-1"></a>    is_rejection <span class="op">=</span> success_cnt <span class="op">&gt;=</span> c</span>
<span id="cb26-15"><a href="" aria-hidden="true" tabindex="-1"></a>    ax.axvline(success_cnt, ls<span class="op">=</span><span class="st">'--'</span>, label<span class="op">=</span><span class="ss">f'Q = </span><span class="sc">{</span>success_cnt<span class="sc">}</span><span class="ss">'</span> <span class="op">+</span> (<span class="st">' відкинуто'</span> <span class="cf">if</span> is_rejection <span class="cf">else</span> <span class="st">' не відкинуто'</span>), color<span class="op">=</span><span class="st">'gray'</span>, alpha<span class="op">=</span><span class="fl">0.4</span>)</span>
<span id="cb26-16"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-17"><a href="" aria-hidden="true" tabindex="-1"></a>    rejection_prob <span class="op">=</span> probs[crit_reg].<span class="bu">sum</span>()</span>
<span id="cb26-18"><a href="" aria-hidden="true" tabindex="-1"></a>    ax.set_title(<span class="ss">f'$\mu = </span><span class="sc">{</span>mu_h0<span class="sc">}</span><span class="ss">$'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb26-19"><a href="" aria-hidden="true" tabindex="-1"></a>    ax.legend()</span></code><button title="Скопіювати текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>

</div>
<img data-src=".02_files/figure-revealjs/ci-fig-6-one-sided-output-1.svg" id="ci-fig-6-one-sided" class="quarto-figure quarto-figure-center r-stretch"></section>
<section class="slide level2">

<p>Критична область стала <strong>більшою</strong> через те, що там тепер знаходиться не <span class="math inline">\(2.5\%\)</span>, а <span class="math inline">\(5\%\)</span> за побудовою. При цьому <strong>лівої</strong> критичної області просто <strong>не існує</strong>, тому за великих <span class="math inline">\(\mu\)</span> не відбувається потрапляння <span class="math inline">\(19\)</span> до неї, а значить ми не відкидаємо гіпотезу.</p>
<p><br>
</p>
<p>Зауважимо, що якби ми будували двосторонній інтервал, але з удвічі більшою <span class="math inline">\(\alpha\)</span>, потрапляння в праву критичну область траплялися б за тих самих <span class="math inline">\(\mu\)</span>, що й в односторонньому критерії. Тому часто <strong>для пошуку односторонньої</strong> межі будують двосторонній довірчий інтервал із <strong>більшою</strong> <span class="math inline">\(\\alpha\)</span>, ігноруючи при цьому праву межу. Це зручно, оскільки можна користуватися тільки однією функцією для критерію.</p>
</section>
<section id="python-та-односторонній-інтервал-3" class="slide level2 smaller">
<h2>Python та односторонній інтервал</h2>
<p>Перевіримо, що вийде при <span class="math inline">\(\alpha = 0.1\)</span>.</p>
<div id="ci-one-sided-calc-22-one-sided-10" class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="" aria-hidden="true" tabindex="-1"></a>success_cnt <span class="op">=</span> <span class="dv">19</span></span>
<span id="cb27-2"><a href="" aria-hidden="true" tabindex="-1"></a>mu_grid <span class="op">=</span> numpy.arange(<span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.001</span>)</span>
<span id="cb27-3"><a href="" aria-hidden="true" tabindex="-1"></a>mu_no_rejection <span class="op">=</span> []</span>
<span id="cb27-4"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-5"><a href="" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> mu_h0 <span class="kw">in</span> mu_grid:</span>
<span id="cb27-6"><a href="" aria-hidden="true" tabindex="-1"></a>    c1, c2 <span class="op">=</span> two_sided_criterion_nonsym(<span class="dv">30</span>, mu_h0, alpha<span class="op">=</span><span class="fl">0.1</span>)</span>
<span id="cb27-7"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> success_cnt <span class="op">&gt;</span> c1 <span class="kw">and</span> success_cnt <span class="op">&lt;</span> c2:</span>
<span id="cb27-8"><a href="" aria-hidden="true" tabindex="-1"></a>        mu_no_rejection.append(mu_h0)</span>
<span id="cb27-9"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-10"><a href="" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Two-sided 90% confidence interval: </span><span class="sc">{</span><span class="bu">min</span>(mu_no_rejection)<span class="sc">:.3f}</span><span class="ss"> -- </span><span class="sc">{</span><span class="bu">max</span>(mu_no_rejection)<span class="sc">:.3f}</span><span class="ss">'</span>)</span></code><button title="Скопіювати текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Two-sided 90% confidence interval: 0.467 -- 0.778</code></pre>
</div>
</div>
</section>
<section id="властивість-довірчого-інтервалу" class="slide level2">
<h2>Властивість довірчого інтервалу</h2>
<p>Яким би не було істинне значення <span class="math inline">\(\mu = \mu_0\)</span>, ймовірність того, що воно перебуває між <span class="math inline">\(\mathcal{L}(Q)\)</span> і <span class="math inline">\(\mathcal{R}(Q)\)</span>, не нижча, ніж <span class="math inline">\(1 - \alpha\)</span>.</p>
<p>Значення <span class="math inline">\(1 - \alpha\)</span> називається <span class="hi">рівнем довіри</span> довірчого інтервалу.</p>
<p><span class="math display">\[ P(\mathcal{L}(Q) &lt; \mu_0 &lt; \mathcal{R}(Q)) \geqslant 1 - \alpha \]</span></p>
<p>Важливо, що випадковість тут прихована саме в <span class="math inline">\(\mathcal{L}\)</span> і <span class="math inline">\(\mathcal{R}\)</span>, а не в <span class="math inline">\(\mu_0\)</span>.</p>
<p>Параметр <span class="math inline">\(\mu_0\)</span> невідомий, але ми припускаємо його константним і не випадковим.</p>
</section>
<section id="перевірка-властивості" class="slide level2 tiny">
<h2>Перевірка властивості</h2>
<div class="columns">
<div class="column" style="width:40%;">
<p>Для цього зафіксуємо <span class="math inline">\(\mu_0\)</span> і проведемо множину експериментів:</p>
<ul>
<li>Генеруємо вибірку з розподілу з параметром <span class="math inline">\(\mu_0\)</span></li>
<li>Обчислюємо статистику <span class="math inline">\(q\)</span></li>
<li>Рахуємо довірчий інтервал для <span class="math inline">\(\alpha = 0.05\)</span></li>
</ul>
<p>Перевіряємо, що частка випадків, коли параметр <span class="math inline">\(\mu_0\)</span> опинився всередині меж інтервалу, хоча б <span class="math inline">\(95\%\)</span></p>
</div><div class="column" style="width:60%;">
<div id="ci-property-slow" class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> my_binomial_confint(n, alpha, q):</span>
<span id="cb29-2"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="co">'''Обчислює довірчий інтервал для вибірки з розподілу Бернуллі</span></span>
<span id="cb29-3"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb29-4"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co">        n (int) - кількість елементів у вибірці</span></span>
<span id="cb29-5"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co">        alpha (float) - рівень значущості критерію</span></span>
<span id="cb29-6"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co">        q (float) - реалізація статистики критерію</span></span>
<span id="cb29-7"><a href="" aria-hidden="true" tabindex="-1"></a><span class="co">    '''</span></span>
<span id="cb29-8"><a href="" aria-hidden="true" tabindex="-1"></a>    mu_grid <span class="op">=</span> numpy.arange(<span class="dv">0</span>, <span class="fl">1.001</span>, <span class="fl">0.001</span>)</span>
<span id="cb29-9"><a href="" aria-hidden="true" tabindex="-1"></a>    mu_no_rejection <span class="op">=</span> []</span>
<span id="cb29-10"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-11"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> mu_h0 <span class="kw">in</span> mu_grid:</span>
<span id="cb29-12"><a href="" aria-hidden="true" tabindex="-1"></a>        c1, c2 <span class="op">=</span> two_sided_criterion_nonsym(<span class="dv">30</span>, mu_h0, alpha<span class="op">=</span><span class="fl">0.05</span>)</span>
<span id="cb29-13"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> q <span class="op">&gt;</span> c1 <span class="kw">and</span> q <span class="op">&lt;</span> c2:</span>
<span id="cb29-14"><a href="" aria-hidden="true" tabindex="-1"></a>            mu_no_rejection.append(mu_h0)</span>
<span id="cb29-15"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-16"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">min</span>(mu_no_rejection), <span class="bu">max</span>(mu_no_rejection)</span>
<span id="cb29-17"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-18"><a href="" aria-hidden="true" tabindex="-1"></a>numpy.random.seed(<span class="dv">2024</span>)</span>
<span id="cb29-19"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-20"><a href="" aria-hidden="true" tabindex="-1"></a>N_EXPERIMENTS <span class="op">=</span> <span class="dv">1000</span></span>
<span id="cb29-21"><a href="" aria-hidden="true" tabindex="-1"></a>SAMPLE_SIZE <span class="op">=</span> <span class="dv">30</span></span>
<span id="cb29-22"><a href="" aria-hidden="true" tabindex="-1"></a>latent_mu <span class="op">=</span> <span class="fl">0.5</span> <span class="co"># «істинне» значення параметра</span></span>
<span id="cb29-23"><a href="" aria-hidden="true" tabindex="-1"></a>binom_true <span class="op">=</span> binom(n<span class="op">=</span>SAMPLE_SIZE, p<span class="op">=</span>latent_mu) <span class="co"># «істинний» розподіл</span></span>
<span id="cb29-24"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-25"><a href="" aria-hidden="true" tabindex="-1"></a>confint_fail_cases <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb29-26"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-27"><a href="" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(N_EXPERIMENTS):</span>
<span id="cb29-28"><a href="" aria-hidden="true" tabindex="-1"></a>    q <span class="op">=</span> binom_true.rvs() <span class="co"># генеруємо одразу суму елементів</span></span>
<span id="cb29-29"><a href="" aria-hidden="true" tabindex="-1"></a>    L, R <span class="op">=</span> my_binomial_confint(n<span class="op">=</span>SAMPLE_SIZE, alpha<span class="op">=</span><span class="fl">0.05</span>, q<span class="op">=</span>q)</span>
<span id="cb29-30"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> L <span class="op">&lt;</span> latent_mu <span class="op">&lt;</span> R:</span>
<span id="cb29-31"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="cf">pass</span> <span class="co"># все добре</span></span>
<span id="cb29-32"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb29-33"><a href="" aria-hidden="true" tabindex="-1"></a>        confint_fail_cases <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb29-34"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-35"><a href="" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="dv">1</span> <span class="op">-</span> confint_fail_cases <span class="op">/</span> N_EXPERIMENTS)</span></code><button title="Скопіювати текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="ci-property-fast" class="cell" data-execution_count="26">
<div class="cell-output cell-output-stdout">
<pre><code>0.962</code></pre>
</div>
</div>
</div></div>
<p>Але це дуже довго! Це через те, що під час кожного експерименту потрібно побудувати довірчий інтервал, а отже перевірити 1000 можливих параметрів <span class="math inline">\(\mu_0\)</span>.</p>
</section>
<section id="довірчий-інтервал-вілсона" class="slide level2 tiny">
<h2>Довірчий інтервал Вілсона</h2>
<p>Розглянутий зараз алгоритм побудови довірчого інтервалу працює занадто довго. У Python є функції, які дозволяють швидше розрахувати інтервал. Наприклад, можна скористатися методом Вілсона і функцією <code>proportion_confint</code></p>
<div id="ci-wilson" class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> statsmodels.stats.proportion <span class="im">import</span> proportion_confint</span>
<span id="cb31-2"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-3"><a href="" aria-hidden="true" tabindex="-1"></a>numpy.random.seed(<span class="dv">20231212</span>)</span>
<span id="cb31-4"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-5"><a href="" aria-hidden="true" tabindex="-1"></a>N_EXPERIMENTS <span class="op">=</span> <span class="dv">1000</span></span>
<span id="cb31-6"><a href="" aria-hidden="true" tabindex="-1"></a>SAMPLE_SIZE <span class="op">=</span> <span class="dv">30</span></span>
<span id="cb31-7"><a href="" aria-hidden="true" tabindex="-1"></a>latent_mu <span class="op">=</span> <span class="fl">0.5</span> <span class="co"># «істинне» значення параметра</span></span>
<span id="cb31-8"><a href="" aria-hidden="true" tabindex="-1"></a>binom_true <span class="op">=</span> binom(n<span class="op">=</span>SAMPLE_SIZE, p<span class="op">=</span>latent_mu) <span class="co"># «істинний» розподіл</span></span>
<span id="cb31-9"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-10"><a href="" aria-hidden="true" tabindex="-1"></a>confint_fail_cases <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb31-11"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-12"><a href="" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(N_EXPERIMENTS):</span>
<span id="cb31-13"><a href="" aria-hidden="true" tabindex="-1"></a>    q <span class="op">=</span> binom_true.rvs()  </span>
<span id="cb31-14"><a href="" aria-hidden="true" tabindex="-1"></a>    L, R <span class="op">=</span> proportion_confint(</span>
<span id="cb31-15"><a href="" aria-hidden="true" tabindex="-1"></a>        count<span class="op">=</span>q, <span class="co"># кількість успіхів</span></span>
<span id="cb31-16"><a href="" aria-hidden="true" tabindex="-1"></a>        nobs<span class="op">=</span>SAMPLE_SIZE, <span class="co"># розмір вибірки</span></span>
<span id="cb31-17"><a href="" aria-hidden="true" tabindex="-1"></a>        alpha<span class="op">=</span><span class="fl">0.05</span>,</span>
<span id="cb31-18"><a href="" aria-hidden="true" tabindex="-1"></a>        method<span class="op">=</span><span class="st">'wilson'</span></span>
<span id="cb31-19"><a href="" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb31-20"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> L <span class="op">&lt;</span> latent_mu <span class="op">&lt;</span> R:</span>
<span id="cb31-21"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="cf">pass</span> <span class="co"># все добре</span></span>
<span id="cb31-22"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb31-23"><a href="" aria-hidden="true" tabindex="-1"></a>        confint_fail_cases <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb31-24"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-25"><a href="" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="dv">1</span> <span class="op">-</span> confint_fail_cases <span class="op">/</span> N_EXPERIMENTS)</span></code><button title="Скопіювати текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>0.943</code></pre>
</div>
</div>
<center>
😢
</center>
</section>
<section id="ci-вілсона-vs.-n" class="slide level2 smaller">
<h2>CI Вілсона vs.&nbsp;N</h2>
<p>Залежність частки успішних влучень <span class="math inline">\(\mu\)</span> у довірчий інтервал від розміру вибірки зобразимо на графіку.</p>
<div id="cell-ci-wilson-plot" class="cell" data-execution_count="28">
<details class="code-fold">
<summary>Код</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="" aria-hidden="true" tabindex="-1"></a>n_grid <span class="op">=</span> numpy.arange(<span class="dv">1</span>, <span class="dv">1000</span>, <span class="dv">25</span>).tolist()</span>
<span id="cb33-2"><a href="" aria-hidden="true" tabindex="-1"></a>interval_success_rate <span class="op">=</span> []</span>
<span id="cb33-3"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-4"><a href="" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> n <span class="kw">in</span> n_grid:</span>
<span id="cb33-5"><a href="" aria-hidden="true" tabindex="-1"></a>    confint_fail_cases <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb33-6"><a href="" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(N_EXPERIMENTS):</span>
<span id="cb33-7"><a href="" aria-hidden="true" tabindex="-1"></a>        binom_true <span class="op">=</span> binom(n<span class="op">=</span>n, p<span class="op">=</span>latent_mu)</span>
<span id="cb33-8"><a href="" aria-hidden="true" tabindex="-1"></a>        q <span class="op">=</span> binom_true.rvs()  </span>
<span id="cb33-9"><a href="" aria-hidden="true" tabindex="-1"></a>        L, R <span class="op">=</span> proportion_confint(</span>
<span id="cb33-10"><a href="" aria-hidden="true" tabindex="-1"></a>            count<span class="op">=</span>q, <span class="co"># кількість успіхів</span></span>
<span id="cb33-11"><a href="" aria-hidden="true" tabindex="-1"></a>            nobs<span class="op">=</span>n, <span class="co"># розмір вибірки</span></span>
<span id="cb33-12"><a href="" aria-hidden="true" tabindex="-1"></a>            alpha<span class="op">=</span><span class="fl">0.05</span>,</span>
<span id="cb33-13"><a href="" aria-hidden="true" tabindex="-1"></a>            method<span class="op">=</span><span class="st">'wilson'</span></span>
<span id="cb33-14"><a href="" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb33-15"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> L <span class="op">&lt;</span> latent_mu <span class="op">&lt;</span> R:</span>
<span id="cb33-16"><a href="" aria-hidden="true" tabindex="-1"></a>            <span class="cf">pass</span> <span class="co"># все добре</span></span>
<span id="cb33-17"><a href="" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb33-18"><a href="" aria-hidden="true" tabindex="-1"></a>            confint_fail_cases <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb33-19"><a href="" aria-hidden="true" tabindex="-1"></a>    interval_success_rate.append(<span class="dv">1</span> <span class="op">-</span> confint_fail_cases <span class="op">/</span> N_EXPERIMENTS)</span>
<span id="cb33-20"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-21"><a href="" aria-hidden="true" tabindex="-1"></a>pyplot.figure(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">7</span>))</span>
<span id="cb33-22"><a href="" aria-hidden="true" tabindex="-1"></a>pyplot.title(<span class="st">'Успішність довірчого інтервалу Вілсона за різного розміру вибірки'</span>, fontsize<span class="op">=</span><span class="dv">15</span>)</span>
<span id="cb33-23"><a href="" aria-hidden="true" tabindex="-1"></a>pyplot.xlabel(<span class="st">'Розмір вибірки'</span>, fontsize<span class="op">=</span><span class="dv">15</span>)</span>
<span id="cb33-24"><a href="" aria-hidden="true" tabindex="-1"></a>pyplot.ylabel(<span class="st">'Частка влучень $\mu$ в інтервал'</span>, fontsize<span class="op">=</span><span class="dv">15</span>)</span>
<span id="cb33-25"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-26"><a href="" aria-hidden="true" tabindex="-1"></a>pyplot.plot(n_grid, interval_success_rate, label<span class="op">=</span><span class="st">'Успішність в експериментах'</span>)</span>
<span id="cb33-27"><a href="" aria-hidden="true" tabindex="-1"></a>pyplot.axhline(<span class="fl">0.95</span>, ls<span class="op">=</span><span class="st">'--'</span>, label<span class="op">=</span><span class="st">'Бажана успішність'</span>, color<span class="op">=</span><span class="st">'red'</span>)</span>
<span id="cb33-28"><a href="" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-29"><a href="" aria-hidden="true" tabindex="-1"></a>pyplot.legend(fontsize<span class="op">=</span><span class="dv">15</span>)</span>
<span id="cb33-30"><a href="" aria-hidden="true" tabindex="-1"></a>pyplot.show()</span></code><button title="Скопіювати текст" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>

</div>
<img data-src=".02_files/figure-revealjs/ci-wilson-plot-output-1.svg" id="ci-wilson-plot" class="quarto-figure quarto-figure-center r-stretch"></section>
<section id="підсумки" class="slide level2">
<h2>Підсумки</h2>
<h4 class="smaller" id="алгоритм-перевірки-гіпотез">Алгоритм перевірки гіпотез</h4>
<ol type="1">
<li>Бізнес-задача / гіпотеза</li>
<li>Формулювання нульової та альтернативної гіпотез:
<ul>
<li><span class="math inline">\(\mathsf{H}_0: \mu = 0.5\)</span></li>
<li><span class="math inline">\(\mathsf{H}_1: \mu &gt; 0.5\)</span></li>
</ul></li>
<li>Статистика критерію <span class="math inline">\(Q = \sum_{i=1}^n \text{Bernoulli}(\mu)\)</span>, <span class="math inline">\(q = 19\)</span></li>
<li>Розподіл <span class="math inline">\(Q\)</span> при <span class="math inline">\(\mathsf{H}_0\)</span> та критична область (<span class="math inline">\(p\)</span>-значення) при <span class="math inline">\(\alpha = 0.05\)</span></li>
<li><span class="math inline">\(\text{MDE} (n, \text{power}, \alpha)\)</span></li>
<li>Довірчий інтервал для <span class="math inline">\(\mu\)</span></li>
</ol>
</section></section>
<section id="дякую-за-увагу" class="title-slide slide level1 unnumbered unlisted center" data-background-iframe=".02_files/libs/colored-particles/index.html">
<h1>Дякую за увагу!</h1>
<p><br> <br></p>
<p><iconify-icon inline="" icon="solar:book-bold"></iconify-icon> <a href="https://aranaur.rbind.io/lectures/asa/">Матеріали курсу</a></p>
<p><iconify-icon inline="" icon="mdi:envelope"></iconify-icon> ihor.miroshnychenko@knu.ua</p>
<p><iconify-icon inline="" icon="ic:baseline-telegram"></iconify-icon> <a href="https://t.me/araprof">Data Mirosh</a></p>
<p><iconify-icon inline="" icon="mdi:linkedin"></iconify-icon> <a href="https://www.linkedin.com/in/ihormiroshnychenko/">@ihormiroshnychenko</a></p>
<p><iconify-icon inline="" icon="mdi:github"></iconify-icon> <a href="https://github.com/Aranaur">@aranaur</a></p>
<p><iconify-icon inline="" icon="ion:home"></iconify-icon> <a href="https://aranaur.rbind.io">aranaur.rbind.io</a></p>
<div class="quarto-auto-generated-content">
<p><img src="fit.png" class="slide-logo"></p>
<div class="footer footer-default">
<p><a href="https://aranaur.rbind.io/lectures/asa/">🔗Прикладний статистичний аналіз</a></p>
</div>
</div>
</section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src=".02_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src=".02_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src=".02_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src=".02_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src=".02_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src=".02_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src=".02_files/libs/revealjs/plugin/verticator/verticator.js"></script>
  <script src=".02_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src=".02_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src=".02_files/libs/revealjs/plugin/search/search.js"></script>
  <script src=".02_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src=".02_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'verticator': {"themetag":"h1","color":"","inversecolor":"","skipuncounted":false,"clickable":true,"position":"auto","offset":"3vmin","autogenerate":true,"tooltip":false,"scale":1},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'h.v',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'default',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: true,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: true,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'fade',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'fade',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1350,

        height: 759.375,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, Verticator, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Скопійовано!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Скопійовано!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        // For code content inside modals, clipBoardJS needs to be initialized with a container option
        // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>